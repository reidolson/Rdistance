# Source current functions from CarlisleWorkspace branch
fundir <- "C:/Users/jcarlis3/Box Sync/Classes/s8_Spr_15/DistanceSampling/Rdistance/Rdistance/R"
source(paste(fundir, "perp.dists.R", sep="/"))
source(paste(fundir, "F.dfunc.estim.R", sep="/"))
# Load or Install/load the Rdistance package (currently version 1.1)
if(!require(Rdistance)) {
install.packages("Rdistance")
require(Rdistance)
}
load("C:/Users/jcarlis3/Box Sync/Classes/s8_Spr_15/DistanceSampling/Rdistance/Rdistance/data/sparrows.rda")
length(unique(sparrows.covs$TranID))  # unique IDs for all transects surveyed (even if no sparrow recorded)
absences <- data.frame(table(sparrows.counts$TranID))  # Note sparrows not observed at all transects
(absences <- data.frame(table(sparrows.counts$TranID)))  # Note sparrows not observed at all transects
(absences <- as.character(absences[absences$Freq==0, 1]))
(toadd <- data.frame(matrix(nrow=length(absences), ncol=ncol(sparrows.counts))))
toadd[, 1] <- absences
names(toadd) <- names(sparrows.counts)
sparrows.counts <- rbind(sparrows.counts, toadd)
View(sparrows.counts)
sparrows.counts$PerpDist <- perp.dists(obs.dist=sparrows.counts$SightDist, obs.angle=sparrows.counts$SightAngle, digits=1)
x <- sparrows.counts$PerpDist
hist(x)
summary(x)
?F.dfunc.estim
(dfunc <- F.dfunc.estim(x, likelihood="uniform", w.hi=150))
?F.abund.estim
#(fit <- F.abund.estim(dfunc, group.sizes=sparrows.counts$Number, tot.trans.len=(72*500), area=10000, plot.bs=TRUE))
(fit <- F.abund.estim(dfunc, tot.trans.len=(72*500), area=10000, R=200, plot.bs=TRUE))
print(fit)
str(fit)
